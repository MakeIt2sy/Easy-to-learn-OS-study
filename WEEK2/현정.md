# 컴퓨터의 구조와 성능 향상

## 1. 컴퓨터의 기본 구성  
<br>

### [하드웨어 구성]
<br>

 컴퓨터의 하드웨어는 필수 저장 장치인 CPU, 메인 메모리, 주변 장치인 입출력 장치, 저장 장치로 구성된다. 
<br>

 1) **CPU와 메모리** : CPU는 명령어를 해석하고 실행하는 장치 / 메모리는 CPU의 작업에 필요한 프로그램과 데이터를 저장하는 공간
 2) **입출력 장치** : 입력 장치는 컴퓨터에 외부의 데이터를 입력하는 장치 / 출력 장치는 처리한 결과를 사용자가 원하는 형태로 출력하는 장치
 3) **저장장치** : 전원과 상관없이 데이터를 영구적으로 저장하는 장치. 메모리보다 느리지만 가격이 저렴하다.
 4) **메인보드** : 컴퓨터 각 부품간에 신호를 주고 받는 통로

 * **폰노이만 구조** : 오늘날 대부분의 컴퓨터는 폰노이만 구조를 따른다. 이는 CPU, 메모리, 입출력 장치, 저장장치가 버스로 연결되어 있는 구조를 말한다. 
   폰노이만 구조의 가장 중요한 특징은 "모든 프로그램은 메모리에 올라와야 실행할 수 있다"는 점이다. 

<br>
 
### [하드웨어 사양 관련 용어]
<br>

 * **클록** : CPU 속도와 관련된 단위. 클록틱에 맞추어 CPU 안의 모든 부품들이 작업을 한다. 
 * **헤르츠** : 클록틱이 발생하는 속도를 나타내는 단위. 1초에 클록틱이 한 번이면 1Hz로 나타낸다. 
 * **시스템 버스** : 메모리와 주변 장치를 연결하는 버스
 * **cpu내부 버스** : cpu 내부에 있는 장치를 연결하는 버스

 <br>

## 2. CPU와 메모리
<br>

### [CPU 구성]
<br>

- **산술논리 연산장치** : CPU에서 데이터를 연산하는 장치 (ALU). 산술 연산과 논리 연산을 수행한다.
- **제어장치** : 명령을 해석하여 작업을 지시하는 장치
- **레지스터** : 자료를 임시 저장하는 장치

### [레지스터 종류]
<br>

- **데이터 레지스터** : 메모리에서 가져온 데이터를 임시로 보관할 때 사용한다. 대부분의 레지스터가 데이터 레지스터이기 때문에 일반/범용 레지스터라고도 부른다.
- **주소 레지스터** : 데이터 또는 명령어가 저장된 메모리의 주소를 보관하는 레지스터
- **프로그램 카운터** : 다음에 실행할 명령어의 주소를 기억하여 제어장치에 알려주는 레지스터
- **명령어 레지스터** : 현재 실행 중인 명령어를 저장하는 레지스터
- **메모리 주소 레지스터** : 메모리를 가져오거나 보낼 때 주소를 지정하기 위한 레지스터
- **메모리 버퍼 레지스터** : 메모리에서 가져온 데이터를 데이터 레지스터로 보내기 전 임시로 저장하는 레지스터

### [버스 종류]
<br>

버스는 CPU와 메모리, 주변 장치 간에 데이터를 주고 받을 때 사용한다.

- **제어 버스** : 다음에 어떤 작업을 할지 지시하는 제어 신호가 오가는 버스. CPU의 제어 장치와 연결되어 있고, 도착 신호나 오류 신호도 전달 받아야하기 때문에 양방향으로 오고 간다.
- **주소 버스** : 메모리의 데이터를 읽거나 쓸 때 어느 위체에서 작업할 것인지 알려주는 위치 정보(주소)가 오가는 버스. CPU에서 메모리나 주변 장치로 나가는 주소 정보는 있지만 CPU로 전달되는 정보는 없다. 
- **데이터 버스** : 메모리 버퍼 레지스터와 연결되어 있는 버스. 데이터의 이동이 양방향이다. 

### [메모리 종류와 부팅]
<br>

메모리는 크게 읽거나 쓸 수 있는 RAM과 읽기만 가능한 ROM으로 나뉜다. 

#### 휘발성 메모리
 - **DRAM** : 일정 시간이 지나면 데이터가 사라지는 메모리
 - **SRAM** : 전력 공급되는 동안에는 데이터를 계속 보관하는 메모리. 속도는 빠르지만 가격이 비싸다.
 - **SDRAM** : DRAM이 발전한 형태로 클록틱이 발생할 때마다 데이터를 저장하는 메모리

#### 비휘발성 메모리
 - **플래시메모리** : 전력이 없어도 데이터를 보관하는 저장 장치. 사용 횟수가 제한 되어 소자 하나당 일정 횟수를 사용하면 제 기능을 잃는다.

#### 부팅 
 - 컴퓨터를 켰을 때 운영체제를 메모리에 올리는 과정  
  전원 -> 롬에 저장된 바이오스 실행 -> 하드웨어 작동 여부 점검 -> 메모리에 부트스트랩 코드를 올려서 실행 -> 부트 스트랩 코드가 운영체제 프로세스 실행

<br>

## 3. 컴퓨터 성능 향상 기술
<br>

CPU와 메모리/주변 장치의 작업 속도 차이를 개선하고 시스템 작업 속도를 올리기 위한 기술

### [버퍼]
- 일정량의 데이터를 한꺼번에 모아 전송하여 속도 차를 완화하는 기술
- 예로 동영상 스트리밍이 있다. 영상 데이터를 버퍼에 일정 부분 넣어 실행하는 방식으로 네트워크에서 데이터가 들어오는 시간, 플레이어에서 재생되는 시간 간의 차이를 해결한다. 
- 유사한 용어로 "스풀" 이 있다. 스풀은 cpu와 입출력장치가 독립적으로 동작하도록 고안된 방식이다. 워드프로세스의 문서를 인쇄할 때, 인쇄할 내용을 미리 하드웨어의 스풀러 공간에 저장하여 출력 작업과 동시에 편집 작업도 가능하게 해준다. 

### [캐시]
- CPU가 쓸 것 같은 데이터를 미리 가져와 임시 저장해두어 CPU와 메모리간의 속도차이를 완화하는 기술
- CPU는 메모리에 접근해야할 때 캐시를 먼저 방문하고, 원하는 데이터를 찾으면 '캐시 히트', 찾지 못하면 '캐시 미스' 라고 부른다.
- 컴퓨터 성능 향상을 위해서는 캐시 적중률이 높아야하지만 캐시는 가격이 비싸기 때문에 늘리는 데에 한계가 있다. 
- 즉시 쓰기/ 지연 쓰기
    * 즉시 쓰기는 캐시에 있는 데이터가 변경되면 이를 즉시 메모리에 반영하는 방식이다. 성능이 저하되는 단점이 있지만 메모리의 최신값을 유지할 수 있다는 장점이 있다.
    * 지연 쓰기는 변경된 내용을 모아서 주기적으로 반영하는 방식으로 '카피백'이라고도 한다. 성능이 향상되는 장점이 있지만 메모리와 데이터 사이의 불일치되는 단점이 있다. 

### [저장장치의 계층구조]

속도가 빠르고 값이 비싼 저장장치를 cpu 가까운 쪽에 두고, 값이 싸고 용량이 큰 저장장치를 반대쪽에 배치하여 적당한 가격으로 빠른 속도와 용량을 동시에 얻는 방법

### [인터럽트]

 초기의 컴퓨터 시스템에서는 cpu가 직접 입출력장치에서 데이터를 가져오거나 내보냈는데, 이를 "폴링" 방식이라고 한다.  
 그러나 오늘날의 컴퓨터에는 많은 주변장치가 있기 때문에 cpu가 모든 입출력에 관여하면 작업 효율이 떨어진다. 그렇기 때문에cpu의 작업과 저장장치의 데이터 이동을 독립적으로 운영하는 인터럽트 방식을 사용한다. 

 - **인터럽트** : cpu가 입출력 관리자에게 작업 지시를 내리면 입출력 관리자는 작업을 처리하고 완료 신호를 보내는데 이 신호를 인터럽트 라고 한다. 
 - **직접 메모리 접근** : 입출력 관리자가 cpu가 요청한 데이터를 메모리에 가져다놓기 위해서는 메모리에 접근할 수 있는 권한이 필요한데 이를 직접 메모리 접근이라고 한다. 
 - **메모리 매핑 입출력** : 메모리에 cpu가 사용하는 데이터와 입출력 관리자가 사용하는 데이터가 섞이면 곤란하기 때문에 공간을 분리한다. 이렇게 메모리의 일정 공간을 입출력에 할당하는 것을 메모리 매핑 입출력 이라고 한다. 
 - **사이클 훔치기** : cpu와 직접 메모리 접근이 동시에 메모리에 접근하려고 하면 보통 cpu가 메모리 사용 권한을 양보하는데 이를 사이클 훔치기라고 한다. 

<br>

## 4. 병렬처리
<br>

동시에 여러 개의 명령을 처리하여 작업의 능률을 올리는 방식 


### [병렬 처리 시 고려 사항]
- 상호 의존성이 없어야 한다.
- 각 단계의 시간을 거의 일정하게 맞춰야 한다. 
- 전체 작업 시간을 몇 단계로 나눌지 고려해야 한다.

### [병렬처리 기법]

- 파이프라인 기법
    - 하나의 코어에서 여러 개의 스레드를 사용하는 기법
    - 파이프라인 위험 : 데이터 위험/ 제어 위험/ 구조 위험

- 슈퍼스칼라 기법
    - 여러 개의 코어에서 복수의 명령어가 동시에 실행되도록 하는 기법

- 슈퍼파이프라인 기법
    - 파이프라인을 강화하영 한 클록 내에 여러 명령어를 처리하는 기법 

- 슈퍼파이프라인 슈퍼스칼라 기법
    - 슈퍼파이프라인 기법을 여러 개의 코어에서 수행하는 기법

- VLIW 기법
    - CPU가 병렬 처리를 지원하지 않을 경우 소프트웨어적으로 병렬 처리 하는 기법.
    동시에 수행할 수 있는 명령어들을 컴파일러가 추출하고 하나의 명령어로 압축하여 실행한다. 
    앞의 병렬 처리 기법들에 비해 동시에 처리하는 명령어의 개수가 적다. 


---
질문 

1. 컴퓨터 부팅 과정을 설명해주세요
2. 메모리 계층 구조가 필요한 이유에 대해 설명해주세요

